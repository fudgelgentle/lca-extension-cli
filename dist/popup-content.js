(()=>{const e=chrome.runtime.getURL("../assets/img/lca-48.png"),n=chrome.runtime.getURL("../assets/img/plus-square-icon.png"),o=(chrome.runtime.getURL("../assets/img/fire-black-icon.png"),chrome.runtime.getURL("../assets/img/fire-grey-icon.png")),t=chrome.runtime.getURL("../assets/img/red-trash-icon.png"),s=chrome.runtime.getURL("../assets/img/most-green-icon.png"),c=chrome.runtime.getURL("../assets/img/equivalent-icon.png"),i=document.createElement("div");i.classList.add("master-lca"),i.classList.add("br-8"),document.body.append(i);const a=document.createElement("div");a.setAttribute("id","placeholder"),document.body.append(a);const r=a.attachShadow({mode:"open"});function d(){let e=r.getElementById("search-phone").value.toUpperCase();const n=r.querySelector(".phone-model-container").children;for(let o=0;o<n.length;o++)(n[o].textContent||n[o].innerText).toUpperCase().indexOf(e)>-1?n[o].style.display="":n[o].style.display="none"}function l(e){const n=parseFloat(e);return e.includes("TB")?1024*n:e.includes("GB")?n:e.includes("MB")?n/1024:n}function g(e){e.style.display="block",requestAnimationFrame((()=>{e.classList.remove("hidden-a"),e.classList.add("visible-a")}))}function p(e){e.classList.remove("visible-a"),e.classList.add("hidden-a"),e.addEventListener("transitionend",(function n(){e.classList.contains("hidden-a")&&(e.style.display="none"),e.removeEventListener("transitionend",n)}))}r.appendChild(i),async function(){await async function(e){const n=await fetch(e),o=await n.text(),t=document.createElement("style");t.textContent=o,r.appendChild(t)}(chrome.runtime.getURL("../assets/popup-content.css")),function(){const a=`\n    <section class="lca-banner flex-stretch">\n      <div class="flex-center title-container br-8 pd-12">\n        <img src="${e}" alt="LCA Image" class="icon-20">\n        <p class="title-text fz-20 eco-bold"><b>LCA-Viz</b></p>\n      </div>\n      <div class="flex-center close-container br-8 pd-16">\n        <svg class="icon-20" width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n        </svg>\n      </div>\n    </section>\n  `;i.insertAdjacentHTML("beforeend",a);{const e=`\n    <div class="phone-master-container">\n      <section class="phone-container br-8 pd-16 hidden-a">\n        <div class="loading-box flex-center br-8 pd-16">\n          <div class="loader">\n            <div class="circle"></div>\n            <div class="circle"></div>\n            <div class="circle"></div>\n          </div>\n        </div>\n        <section class="phone-spec-container fz-20 hidden-a"></section>\n      </section>\n\n\n      <section class="compare-phone br-8 hidden-a">\n        <div class="compare-container br-8 pd-4">\n          <div class="flex-center compare-btn">\n            <img src="${n}" class="icon-20">\n            <p class="fz-16 margin-8">Compare</p>\n          </div>\n        </div>\n        <div class="select-phone-container br-8 pd-16 slide-content">\n          <div class="flex-center close-phone-btn">\n            <svg class="icon-20" width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n            </svg>\n          </div>\n          <p class="margin-0 fz-20">Select phone model</p>\n          <p class="phone-spec-title fz-12">Comparing with: <b>iPhone 15 Pro</b></p>\n          <div class="search-container br-8 pd-16 fz-16">\n            <input type="text" id="search-phone" class="grey-text fz-16" placeholder="Search..." title="Type to search for phone models">\n            <div class="phone-model-container">\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <section class="side-by-side-section hidden-a">\n        <div class="side-by-side-container flex-center">\n          <div class="side-by-side-spec-container grid-1fr-1fr cg-12"></div>\n        </div>\n      </section>\n    </div>\n  `;i.insertAdjacentHTML("beforeend",e),(m=r.getElementById("search-phone")).addEventListener("keydown",(e=>{e.stopPropagation()})),m.addEventListener("keyup",(e=>{e.stopPropagation()})),m.addEventListener("keypress",(e=>{e.stopPropagation()})),setTimeout((()=>{console.log("got in phone case"),async function(){r.querySelector(".phone-container").classList.remove("hidden-a"),await async function(){console.log("got inside hideLoadingIcon");let e=r.querySelector(".loading-box");return e?new Promise((n=>{setTimeout((()=>{console.log("Adding hidden-a class to loadingBox"),e.classList.add("hidden-a"),console.log("hidden-a class added:",e.classList),console.log("loading-box: ",e),n()}),1500)})):(console.error("loadingBox not found"),Promise.resolve())}();const e=r.querySelector(".phone-spec-container"),n=r.querySelector(".compare-phone");g(e),n.classList.remove("hidden-a"),function(){const e="iPhone 15 Pro",n=[{storage:"128 GB",co2e:"12 kg CO2e"},{storage:"256 GB",co2e:"24 kg CO2e"},{storage:"512 GB",co2e:"48 kg CO2e"},{storage:"1 TB",co2e:"96 kg CO2e"}],t=r.querySelector(".phone-spec-container"),i=n,a=e;t.innerHTML+=`\n    <p class="phone-spec-title eco-bold" id="currentPhone"><b>${a} Carbon Emissions</b></p>\n  `;let d=i[0];i.forEach((e=>{parseFloat(e.co2e.split(" ")[0])<parseFloat(d.co2e.split(" ")[0])&&(d=e)})),i.forEach(((e,n)=>{const i=parseFloat(e.co2e.split(" ")[0]),a=parseFloat(d.co2e.split(" ")[0]),r=(i-a)/a*100,l=e.storage===d.storage;t.innerHTML+=`\n      <div class="details-container fz-16" id=${n+"-c"}>\n        <div class="flex-center ${l?"most-green":""} cg-4">\n          <p class="eco-bold"><b>${e.storage} </b>&nbsp;</p>\n          ${l?`<img src="${s}" class="icon-16" alt="Most eco-friendly option">`:`<span class="red-text fz-12">(+${r.toFixed(0)}% emissions)</span>`}\n        </div>\n        <div class="flex-center co2e-data-container pd-8 br-8 cg-4 lexend-reg">\n          <p class="margin-0">${e.co2e}</p>\n          <img src="${c}" class="icon-16" alt="Equivalent to">\n          <div class="flex-center cg-4">\n            <p class="margin-0 grey-text fz-16">${(.88*i).toFixed(1)} kg of trash burned</p>\n            <img src="${o}" class="icon-16" alt="Trash">\n          </div>\n        </div>\n      </div>\n      `}))}(),function(){const e=r.querySelector(".compare-btn"),n=r.querySelector(".compare-phone"),o=r.querySelector(".compare-container"),c=r.querySelector(".slide-content");e.addEventListener("click",(async()=>{await async function(){const e=[{id:1,device:"Samsung Galaxy S24 Ultra",carbonFootprint:[{storage:"256 GB",co2e:"26 kg CO2e"},{storage:"512 GB",co2e:"50 kg CO2e"},{storage:"1 TB",co2e:"98 kg CO2e"}]},{id:2,device:"Samsung Galaxy Z Flip 5",carbonFootprint:[{storage:"256 GB",co2e:"22 kg CO2e"},{storage:"512 GB",co2e:"44 kg CO2e"}]},{id:3,device:"OnePlus 12R",carbonFootprint:[{storage:"128 GB",co2e:"18 kg CO2e"},{storage:"256 GB",co2e:"36 kg CO2e"}]},{id:4,device:"Google Pixel 8 Pro",carbonFootprint:[{storage:"128 GB",co2e:"20 kg CO2e"},{storage:"256 GB",co2e:"40 kg CO2e"},{storage:"512 GB",co2e:"80 kg CO2e"}]}],n=r.querySelector(".phone-model-container");n.innerHTML="",e.forEach(((o,t)=>{const s=document.createElement("p");s.className="phone-model-text br-4"+(t===e.length-1?" last":""),s.id=o.id,s.textContent=o.device,n.appendChild(s)}))}(),n.classList.add("down"),o.classList.add("hide"),c.classList.add("slide-down"),function(){const e=r.querySelector(".phone-model-container").children;Array.from(e).forEach((e=>{e.addEventListener("click",(e=>{const n=parseInt(e.target.id),o=r.querySelector(".compare-phone"),c=r.querySelector(".compare-container"),i=r.querySelector(".slide-content");o.classList.remove("down"),c.classList.remove("hide"),i.classList.remove("slide-down"),function(e){const n="iPhone 15 Pro",o=[{storage:"128 GB",co2e:"12 kg CO2e"},{storage:"256 GB",co2e:"24 kg CO2e"},{storage:"512 GB",co2e:"48 kg CO2e"},{storage:"1 TB",co2e:"96 kg CO2e"}],c=[{id:1,device:"Samsung Galaxy S24 Ultra",carbonFootprint:[{storage:"256 GB",co2e:"26 kg CO2e"},{storage:"512 GB",co2e:"50 kg CO2e"},{storage:"1 TB",co2e:"98 kg CO2e"}]},{id:2,device:"Samsung Galaxy Z Flip 5",carbonFootprint:[{storage:"256 GB",co2e:"22 kg CO2e"},{storage:"512 GB",co2e:"44 kg CO2e"}]},{id:3,device:"OnePlus 12R",carbonFootprint:[{storage:"128 GB",co2e:"18 kg CO2e"},{storage:"256 GB",co2e:"36 kg CO2e"}]},{id:4,device:"Google Pixel 8 Pro",carbonFootprint:[{storage:"128 GB",co2e:"20 kg CO2e"},{storage:"256 GB",co2e:"40 kg CO2e"},{storage:"512 GB",co2e:"80 kg CO2e"}]}].find((n=>n.id===e)),i=r.querySelector(".side-by-side-section"),a=r.querySelector(".phone-container");let d=r.querySelector(".side-by-side-spec-container");d.innerHTML="",d.innerHTML+=`\n    <p class="margin-0 side-phone-text fz-16"><b>${n}</b></p>\n    <p class="margin-0 side-phone-text fz-16"><b>${c.device}</b></p>\n    <img src="${t}" class="icon-16 trash-btn" alt="remove device">\n  `;let m=function(e,n){const o=new Set([...e.map((e=>e.storage)),...n.map((e=>e.storage))]),t=Array.from(o).sort(((e,n)=>l(e)-l(n))),s=[],c=[];t.forEach((o=>{const t=e.find((e=>e.storage===o)),i=n.find((e=>e.storage===o));s.push(t||{storage:o,co2e:"--"}),c.push(i||{storage:o,co2e:"--"})}));for(let e=0;e<s.length;e++)"--"==s[e].co2e&&(s[e].storage="--"),"--"==c[e].co2e&&(c[e].storage="--");return[s,c]}(o,c.carbonFootprint),h=m[0],v=m[1];for(let e=0;e<h.length;e++)d.innerHTML+=`\n      <div class="details-container fz-16">\n        <div class="flex-center most-green cg-4">\n          <p><b>${h[e].storage}</b>&nbsp;</p>\n          ${0===e?`<img src="${s}" class="icon-16" alt="Most eco-friendly option">`:""}\n        </div>\n        <div class="flex-center co2e-data-container pd-8 br-8 cg-4 lexend-reg">\n          <p class="margin-0">${h[e].co2e}</p>\n        </div>\n      </div>\n      <div class="details-container fz-16">\n        <div class="flex-center most-green cg-4">\n          <p><b>${v[e].storage}</b>&nbsp;</p>\n          ${0===e?`<img src="${s}" class="icon-16" alt="Most eco-friendly option">`:""}\n        </div>\n        <div class="flex-center co2e-data-container pd-8 br-8 cg-4 lexend-reg">\n          <p class="margin-0">${v[e].co2e}</p>\n        </div>\n      </div>\n    `;d.querySelector(".trash-btn").addEventListener("click",(()=>{p(i),g(a)}));r.querySelector(".lca-banner").insertAdjacentElement("afterend",i),a.classList.contains("hidden-a")?(p(i),g(i)):(p(a),g(i))}(n)}))}))}()})),r.querySelector(".close-phone-btn").addEventListener("click",(()=>{n.classList.remove("down"),o.classList.remove("hide"),c.classList.remove("slide-down")}))}(),r.getElementById("search-phone").addEventListener("keyup",d)}()}),0)}var m}();const a=r.querySelector(".phone-container");console.log(a)}()})();